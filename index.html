<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Voltify</title>
  <link rel="icon" type="image/png" href="logo.png" />

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg0:#070A12;
      --bg1:#0B1020;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.10);
      --text:#EAF0FF;
      --muted: rgba(234,240,255,.62);
      --accent:#7C3AED;
      --accent2:#22C55E;
      --secret:#FFD700;
      --danger:#FF6B6B;
      --ring: rgba(124,58,237,.35);
      --shadow: 0 18px 60px rgba(0,0,0,.55);
      --radius: 18px;
    }

    *{box-sizing:border-box}
    html,body{height:100%; margin:0;}
    body{
      font-family:"Space Grotesk", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 20% 10%, color-mix(in oklab, var(--accent) 18%, transparent), transparent 60%),
        radial-gradient(900px 500px at 85% 20%, color-mix(in oklab, var(--accent2) 14%, transparent), transparent 55%),
        radial-gradient(900px 700px at 50% 80%, rgba(255,255,255,.06), transparent 60%),
        linear-gradient(180deg, var(--bg0) 0%, var(--bg1) 100%);
      overflow-x:hidden;
    }

    .energy{
      position:fixed;
      inset:-2px;
      pointer-events:none;
      opacity:.55;
      background:
        repeating-linear-gradient(90deg, rgba(255,255,255,.04) 0 1px, transparent 1px 60px),
        repeating-linear-gradient(0deg, rgba(255,255,255,.02) 0 1px, transparent 1px 60px);
      mask-image: radial-gradient(circle at 50% 35%, black 0%, transparent 68%);
      animation: drift 10s linear infinite;
    }

    @keyframes drift{
      from{transform:translate3d(0,0,0)}
      to{transform:translate3d(-60px, -60px, 0)}
    }

    @keyframes glitchIn {
      0% { opacity: 0; transform: translate(-50%, -50%) scale(0.9); filter: hue-rotate(0deg); }
      50% { transform: translate(-50%, -50%) scale(1.02); filter: hue-rotate(90deg); }
      100% { opacity: 1; transform: translate(-50%, -50%) scale(1); filter: hue-rotate(0deg); }
    }

    header{
      position:sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(12px);
      background: linear-gradient(180deg, rgba(10,12,20,.82), rgba(10,12,20,.45));
      border-bottom:1px solid rgba(255,255,255,.10);
    }

    .topbar{
      max-width:1100px;
      margin:0 auto;
      padding:12px 16px;
      display:flex;
      align-items:center;
      gap:12px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:700;
      letter-spacing:.4px;
    }

    nav{
      margin-left:auto;
      display:flex;
      gap:8px;
      align-items:center;
      flex-wrap:wrap;
      justify-content:flex-end;
    }

    .navbtn{
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color:var(--text);
      padding:9px 12px;
      border-radius:14px;
      text-decoration:none;
      font-weight:600;
      font-size:14px;
      transition:.15s ease;
      cursor: pointer;
    }

    .navbtn:hover{
      transform: translateY(-1px);
      border-color: color-mix(in oklab, var(--accent) 40%, rgba(255,255,255,.12));
      box-shadow: 0 0 0 3px var(--ring);
    }

    .wrap{
      max-width:1100px;
      margin:0 auto;
      padding:28px 16px 40px;
    }

    .hero{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap:16px;
      align-items:stretch;
    }

    .card{
      border-radius: var(--radius);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }

    .card::before{
      content:"";
      position:absolute;
      inset:-2px;
      background: radial-gradient(800px 240px at 20% 0%, color-mix(in oklab, var(--accent) 22%, transparent), transparent 60%),
                  radial-gradient(800px 240px at 80% 0%, color-mix(in oklab, var(--accent2) 18%, transparent), transparent 60%);
      opacity:.7;
      pointer-events:none;
    }

    .card > *{position:relative; z-index:1}

    .mainCard{
      padding:22px;
      min-height: 320px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .title{
      margin:0;
      font-size: clamp(34px, 4vw, 56px);
      line-height:1.05;
      letter-spacing:-.5px;
    }

    .subtitle{
      margin:0;
      color:var(--muted);
      font-size: 16px;
    }

    .searchMode {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
      background: rgba(0,0,0,.25);
      padding: 6px;
      border-radius: 40px;
      width: fit-content;
      border: 1px solid rgba(255,255,255,.1);
    }

    .modeBtn {
      padding: 8px 16px;
      border-radius: 30px;
      border: none;
      background: transparent;
      color: var(--muted);
      font-weight: 600;
      font-size: 14px;
      cursor: pointer;
      transition: all .15s ease;
    }

    .modeBtn.active {
      background: var(--accent);
      color: white;
      box-shadow: 0 4px 12px rgba(124,58,237,.3);
    }

    .searchRow{
      margin-top:8px;
      display:flex;
      gap:10px;
      align-items:center;
    }

    .searchRow input{
      flex:1;
      padding: 14px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      outline:none;
      background: rgba(0,0,0,.18);
      color: var(--text);
      font-size: 15px;
    }

    .go{
      padding: 12px 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.14);
      background: linear-gradient(135deg, color-mix(in oklab, var(--accent) 80%, #000), color-mix(in oklab, var(--accent2) 70%, #000));
      color: white;
      font-weight:700;
      cursor:pointer;
    }

    .quickGrid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0,1fr));
      gap:10px;
    }

    .tile{
      padding:14px;
      border-radius: 16px;
      background: rgba(0,0,0,.18);
      border:1px solid rgba(255,255,255,.12);
      text-decoration:none;
      color:var(--text);
      transition:.15s ease;
    }

    .tile:hover{
      transform: translateY(-2px);
      border-color: color-mix(in oklab, var(--accent) 40%, rgba(255,255,255,.12));
      box-shadow: 0 0 0 4px var(--ring);
    }

    .sideCard{
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .badgeRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    .badge{
      padding:10px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.12);
      color: var(--muted);
      font-size: 13px;
      display:flex;
      align-items:center;
      gap:8px;
    }

    .dot{
      width:8px;height:8px;border-radius:50%;
      background: var(--accent2);
      box-shadow: 0 0 18px color-mix(in oklab, var(--accent2) 50%, transparent);
    }

    .bigNum{
      font-size: 34px;
      font-weight:800;
      letter-spacing:-.5px;
      color: var(--text);
      margin-top:2px;
    }

    /* Settings Modal */
    .modalBack{
      position:fixed; inset:0;
      background: rgba(0,0,0,.85);
      backdrop-filter: blur(8px);
      display:none;
      place-items:center;
      padding:16px;
      z-index:9999;
    }

    .modal{
      width: min(900px, 96vw);
      max-height: 90vh;
      overflow-y: auto;
      border-radius: 30px;
      background: rgba(10,12,20,.95);
      border:1px solid rgba(255,255,255,.14);
      box-shadow: var(--shadow);
    }

    .modalHead{
      padding:20px 24px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      border-bottom:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.3);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    .modalHead b{
      font-size: 20px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .close{
      cursor:pointer;
      border:1px solid rgba(255,255,255,.14);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 10px 20px;
      border-radius: 30px;
      font-weight:600;
      transition:.15s;
    }

    .close:hover{
      background: rgba(255,99,99,.3);
      border-color: var(--danger);
    }

    .modalBody{
      padding:30px;
    }

    /* Theme Section (Original) */
    .setCard{
      border:1px solid rgba(255,255,255,.12);
      border-radius: 18px;
      background: rgba(255,255,255,.05);
      padding:20px;
      margin-bottom: 30px;
    }

    .setCard h3{
      margin:0 0 15px 0;
      font-size:18px;
      color: var(--text);
    }

    .row{
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      margin-bottom: 20px;
    }

    .preset{
      cursor:pointer;
      padding:10px 16px;
      border-radius: 30px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: var(--text);
      font-weight:600;
      font-size:14px;
      transition:.15s;
    }

    .preset:hover{
      box-shadow:0 0 0 4px var(--ring);
      border-color: var(--accent);
    }

    .picker{
      display:flex;
      align-items:center;
      gap:15px;
      margin-top:10px;
    }

    .picker label{
      color: var(--muted);
      font-size:14px;
    }

    input[type="color"]{
      width:50px;
      height:40px;
      border:1px solid rgba(255,255,255,.2);
      border-radius:10px;
      background:transparent;
      padding:0;
      cursor:pointer;
    }

    /* PIN System Section (New) */
    .pin-section {
      border: 2px solid var(--secret);
      border-radius: 18px;
      background: rgba(0,0,0,.3);
      padding: 20px;
      margin-top: 30px;
    }

    .pin-section h3 {
      margin: 0 0 15px 0;
      font-size: 18px;
      color: var(--secret);
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .pin-display {
      background: rgba(0,0,0,.5);
      border: 2px solid var(--secret);
      border-radius: 12px;
      padding: 15px;
      text-align: center;
      font-size: 32px;
      font-weight: 700;
      letter-spacing: 8px;
      color: var(--secret);
      margin-bottom: 20px;
      font-family: monospace;
    }

    .pin-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }

    .pin-btn {
      aspect-ratio: 1;
      background: rgba(255,255,255,0.08);
      border: 1px solid rgba(255,215,0,0.3);
      border-radius: 16px;
      color: white;
      font-size: 24px;
      font-weight: 700;
      cursor: pointer;
      transition: 0.15s;
    }

    .pin-btn:hover {
      background: rgba(255,215,0,0.2);
      border-color: var(--secret);
      transform: translateY(-2px);
    }

    .pin-actions {
      display: flex;
      gap: 12px;
    }

    .pin-action-btn {
      flex: 1;
      padding: 12px;
      border: 1px solid rgba(255,215,0,0.3);
      border-radius: 12px;
      background: rgba(255,255,255,0.08);
      color: white;
      font-weight: 600;
      cursor: pointer;
    }

    .pin-action-btn.clear {
      background: rgba(255,99,99,0.15);
      border-color: rgba(255,99,99,0.3);
    }

    .pin-action-btn.clear:hover {
      background: rgba(255,99,99,0.25);
    }

    /* Blooket Hacks UI (Users) */
    .blooket-ui {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 800px;
      background: rgba(10,15,30,0.98);
      backdrop-filter: blur(20px);
      border: 3px solid var(--accent2);
      border-radius: 30px;
      padding: 30px;
      z-index: 10000;
      box-shadow: 0 30px 60px rgba(0,0,0,0.8);
      animation: glitchIn 0.3s ease;
    }

    .blooket-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      border-bottom: 2px solid var(--accent2);
      padding-bottom: 15px;
    }

    .blooket-header h2 {
      margin: 0;
      color: var(--accent2);
      font-size: 28px;
    }

    .close-blooket {
      background: rgba(255,255,255,0.1);
      border: none;
      color: white;
      font-size: 24px;
      width: 40px;
      height: 40px;
      border-radius: 10px;
      cursor: pointer;
    }

    .close-blooket:hover {
      background: rgba(255,99,99,0.3);
    }

    .hacks-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .hack-card {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(34,197,94,0.2);
      border-radius: 16px;
      padding: 20px;
    }

    .hack-card h3 {
      margin: 0 0 10px;
      color: var(--accent2);
    }

    .hack-card p {
      color: var(--muted);
      font-size: 14px;
      margin: 0 0 15px;
    }

    .hack-toggle {
      background: rgba(34,197,94,0.2);
      border: 1px solid var(--accent2);
      color: white;
      padding: 8px 16px;
      border-radius: 8px;
      cursor: pointer;
      width: 100%;
    }

    .hack-toggle.active {
      background: var(--accent2);
    }

    /* Admin UI */
    .admin-ui {
      display: none;
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 90%;
      max-width: 700px;
      background: rgba(10,15,30,0.98);
      backdrop-filter: blur(20px);
      border: 3px solid var(--secret);
      border-radius: 30px;
      padding: 30px;
      z-index: 10001;
      box-shadow: 0 30px 60px rgba(0,0,0,0.8);
      animation: glitchIn 0.3s ease;
    }

    .admin-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 25px;
      border-bottom: 2px solid var(--secret);
      padding-bottom: 15px;
    }

    .admin-header h2 {
      margin: 0;
      color: var(--secret);
      font-size: 28px;
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: rgba(255,255,255,0.05);
      border: 1px solid rgba(255,215,0,0.2);
      border-radius: 16px;
      padding: 20px;
      text-align: center;
    }

    .stat-label {
      color: var(--muted);
      font-size: 14px;
      margin-bottom: 10px;
    }

    .stat-value {
      font-size: 32px;
      font-weight: 700;
      color: var(--secret);
    }

    .current-pin-box {
      background: linear-gradient(135deg, rgba(124,58,237,0.2), rgba(34,197,94,0.2));
      border: 2px solid var(--accent2);
      border-radius: 20px;
      padding: 25px;
      text-align: center;
      margin-bottom: 30px;
    }

    .pin-label {
      color: var(--muted);
      font-size: 14px;
      margin-bottom: 10px;
    }

    .pin-number {
      font-size: 54px;
      font-weight: 800;
      letter-spacing: 12px;
      color: var(--accent2);
      font-family: monospace;
      margin-bottom: 15px;
    }

    .expiry-info {
      display: flex;
      justify-content: center;
      gap: 20px;
      color: var(--muted);
    }

    .admin-actions {
      display: flex;
      gap: 15px;
    }

    .admin-btn {
      flex: 1;
      padding: 15px;
      border: none;
      border-radius: 30px;
      font-weight: 700;
      cursor: pointer;
      transition: 0.15s;
    }

    .admin-btn.danger {
      background: linear-gradient(135deg, var(--danger), #FF4444);
      color: white;
    }

    .admin-btn.danger:hover {
      transform: scale(1.02);
      box-shadow: 0 10px 20px rgba(255,99,99,0.3);
    }

    .admin-btn.success {
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      color: white;
    }

    .admin-btn.success:hover {
      transform: scale(1.02);
      box-shadow: 0 10px 20px rgba(124,58,237,0.3);
    }
  </style>
</head>
<body>
  <div class="energy"></div>

  <header>
    <div class="topbar">
      <div class="brand">
        <img src="logo.png" alt="Voltify Logo" style="width:34px;height:34px;border-radius:12px;">
        <div>Voltify</div>
      </div>
      <nav>
        <a class="navbtn" href="index.html">Home</a>
        <a class="navbtn" href="games.html">Games</a>
        <a class="navbtn" href="movies.html">Movies</a>
        <a class="navbtn" id="openSettings">Settings</a>
      </nav>
    </div>
  </header>

  <div class="wrap">
    <section class="hero">
      <div class="card">
        <div class="mainCard">
          <h1 class="title">Voltify‚ö°</h1>
          <p class="subtitle">Games, Movies, And Proxies Made For You.</p>

          <div class="searchMode">
            <button class="modeBtn active" id="normalMode">üîç Normal Search</button>
            <button class="modeBtn" id="proxyMode">üõ°Ô∏è Proxy Mode</button>
          </div>

          <div class="searchRow">
            <input id="searchInput" placeholder="Search Google or type a URL..." autocomplete="off" />
            <button class="go" id="goBtn">Go</button>
          </div>

          <div class="quickGrid">
            <a class="tile" href="games.html">
              <b>üéÆ Games</b>
              <small>Play your stuff</small>
            </a>
            <a class="tile" href="movies.html">
              <b>üé¨ Movies</b>
              <small>Watch your films</small>
            </a>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="sideCard">
          <div class="badgeRow">
            <div class="badge"><span class="dot"></span><span id="timeText">--:--</span></div>
            <div class="badge">Visitors: <b id="visitorCount">--</b></div>
          </div>
          <div style="margin-top:6px;color:var(--muted);font-weight:600;">Status</div>
          <div class="bigNum" id="statusText">Active!</div>
          <div class="smallNote">
            Tip: Don't Introduce The Site By Saying "Check Out (My Name)'s Site! Please say Voltify
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Settings Modal -->
  <div class="modalBack" id="modalBack">
    <div class="modal">
      <div class="modalHead">
        <b>‚öôÔ∏è Voltify Settings</b>
        <button class="close" id="closeSettings">Close</button>
      </div>
      <div class="modalBody">
        <!-- Theme Section (Original) -->
        <div class="setCard">
          <h3>Theme Presets</h3>
          <div class="row">
            <button class="preset" data-theme="neon">Neon</button>
            <button class="preset" data-theme="ocean">Ocean</button>
            <button class="preset" data-theme="ember">Ember</button>
            <button class="preset" data-theme="mono">Mono</button>
          </div>

          <div class="picker">
            <label>Accent</label>
            <input type="color" id="accentPicker" />
            <label>Accent 2</label>
            <input type="color" id="accent2Picker" />
          </div>

          <div class="smallNote" style="margin-top:15px; color:var(--muted);">
            Presets change everything instantly. The color pickers let you fine-tune the 2 main colors.
          </div>
        </div>

        <!-- PIN Section (New - Below Theme) -->
        <div class="pin-section">
          <h3>üîê SECRET PIN ACCESS</h3>
          
          <div class="pin-display" id="pinDisplay">‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢</div>
          
          <div class="pin-grid">
            <button class="pin-btn" onclick="addPinDigit('1')">1</button>
            <button class="pin-btn" onclick="addPinDigit('2')">2</button>
            <button class="pin-btn" onclick="addPinDigit('3')">3</button>
            <button class="pin-btn" onclick="addPinDigit('4')">4</button>
            <button class="pin-btn" onclick="addPinDigit('5')">5</button>
            <button class="pin-btn" onclick="addPinDigit('6')">6</button>
            <button class="pin-btn" onclick="addPinDigit('7')">7</button>
            <button class="pin-btn" onclick="addPinDigit('8')">8</button>
            <button class="pin-btn" onclick="addPinDigit('9')">9</button>
            <button class="pin-btn" onclick="addPinDigit('*')">*</button>
            <button class="pin-btn" onclick="addPinDigit('0')">0</button>
            <button class="pin-btn" onclick="addPinDigit('#')">#</button>
          </div>

          <div class="pin-actions">
            <button class="pin-action-btn clear" onclick="clearPin()">Clear</button>
            <button class="pin-action-btn" onclick="submitPin()">Enter</button>
          </div>

          <div style="text-align: center; margin-top: 15px; color: var(--muted); font-size: 12px;" id="pinMessage"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Blooket Hacks UI (Users) -->
  <div class="blooket-ui" id="blooketUI">
    <div class="blooket-header">
      <h2>üéÆ BLOOKET HACKS</h2>
      <button class="close-blooket" onclick="closeBlooketUI()">‚úï</button>
    </div>
    
    <div class="hacks-grid">
      <div class="hack-card">
        <h3>‚ö° Infinite Coins</h3>
        <p>Add unlimited coins</p>
        <button class="hack-toggle" onclick="toggleHack(this)">Activate</button>
      </div>
      <div class="hack-card">
        <h3>üéØ Auto Answer</h3>
        <p>Auto-correct answers</p>
        <button class="hack-toggle" onclick="toggleHack(this)">Activate</button>
      </div>
      <div class="hack-card">
        <h3>‚öîÔ∏è All Blooks</h3>
        <p>Unlock every Blook</p>
        <button class="hack-toggle" onclick="toggleHack(this)">Activate</button>
      </div>
      <div class="hack-card">
        <h3>üìä 10x Score</h3>
        <p>Multiply your score</p>
        <button class="hack-toggle" onclick="toggleHack(this)">Activate</button>
      </div>
    </div>
  </div>

  <!-- Admin UI -->
  <div class="admin-ui" id="adminUI">
    <div class="admin-header">
      <h2>üëë ADMIN PANEL</h2>
      <button class="close-blooket" onclick="closeAdminUI()">‚úï</button>
    </div>
    
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-label">PIN Uses This Period</div>
        <div class="stat-value" id="pinUses">0</div>
      </div>
      <div class="stat-card">
        <div class="stat-label">Days Remaining</div>
        <div class="stat-value" id="adminDaysRemaining">14</div>
      </div>
    </div>

    <div class="current-pin-box">
      <div class="pin-label">üîê CURRENT BI-WEEKLY PIN</div>
      <div class="pin-number" id="adminPinDisplay">------</div>
      <div class="expiry-info">
        <span>üîÑ Resets in <span id="adminExpiry">14</span> days</span>
      </div>
    </div>

    <div class="admin-actions">
      <button class="admin-btn danger" id="disablePinBtn" onclick="togglePinDisable()">
        ‚õî Disable PIN for Blooket Hacks
      </button>
      <button class="admin-btn success" onclick="refreshAdminStats()">
        üîÑ Refresh Stats
      </button>
    </div>
    <div style="text-align: center; margin-top: 20px; color: var(--muted); font-size: 12px;" id="adminMessage"></div>
  </div>

  <script>
    // ========== ORIGINAL THEME CODE ==========
    const themes = {
      neon:  { accent:'#7C3AED', accent2:'#22C55E', bg0:'#070A12', bg1:'#0B1020' },
      ocean: { accent:'#06B6D4', accent2:'#3B82F6', bg0:'#041018', bg1:'#061A2B' },
      ember: { accent:'#F97316', accent2:'#EF4444', bg0:'#120707', bg1:'#1D0B0B' },
      mono:  { accent:'#A3A3A3', accent2:'#E5E7EB', bg0:'#070707', bg1:'#111111' },
    };

    function applyTheme(t){
      const r = document.documentElement;
      r.style.setProperty('--accent', t.accent);
      r.style.setProperty('--accent2', t.accent2);
      r.style.setProperty('--bg0', t.bg0);
      r.style.setProperty('--bg1', t.bg1);
      r.style.setProperty('--ring', `rgba(${hexToRgb(t.accent).join(',')}, .35)`);
    }

    function hexToRgb(hex){
      const h = hex.replace('#','').trim();
      const full = h.length === 3 ? h.split('').map(c=>c+c).join('') : h;
      const n = parseInt(full, 16);
      return [(n>>16)&255, (n>>8)&255, n&255];
    }

    function saveThemeState(state){
      localStorage.setItem('voltify_theme', JSON.stringify(state));
    }
    
    function loadThemeState(){
      try{
        return JSON.parse(localStorage.getItem('voltify_theme') || 'null');
      }catch{ return null; }
    }

    const saved = loadThemeState();
    if (saved?.preset && themes[saved.preset]) {
      applyTheme(themes[saved.preset]);
      if (saved.customAccent) document.documentElement.style.setProperty('--accent', saved.customAccent);
      if (saved.customAccent2) document.documentElement.style.setProperty('--accent2', saved.customAccent2);
    } else {
      applyTheme(themes.neon);
    }

    function currentVar(name){
      return getComputedStyle(document.documentElement).getPropertyValue(name).trim();
    }
    
    const accentPicker = document.getElementById('accentPicker');
    const accent2Picker = document.getElementById('accent2Picker');
    accentPicker.value = rgbToHex(currentVar('--accent'));
    accent2Picker.value = rgbToHex(currentVar('--accent2'));

    function rgbToHex(v){
      if (v.startsWith('#')) return v;
      const m = v.match(/(\d+)\s*,\s*(\d+)\s*,\s*(\d+)/);
      if (!m) return '#7C3AED';
      const [r,g,b] = [Number(m[1]),Number(m[2]),Number(m[3])];
      return '#' + [r,g,b].map(x=>x.toString(16).padStart(2,'0')).join('');
    }

    document.querySelectorAll('.preset').forEach(btn=>{
      btn.addEventListener('click', ()=>{
        const key = btn.dataset.theme;
        applyTheme(themes[key]);
        document.documentElement.style.setProperty('--ring', `rgba(${hexToRgb(themes[key].accent).join(',')}, .35)`);
        accentPicker.value = themes[key].accent;
        accent2Picker.value = themes[key].accent2;
        saveThemeState({ preset:key, customAccent:themes[key].accent, customAccent2:themes[key].accent2 });
      });
    });

    function applyCustomColors(){
      const a1 = accentPicker.value;
      const a2 = accent2Picker.value;
      document.documentElement.style.setProperty('--accent', a1);
      document.documentElement.style.setProperty('--accent2', a2);
      document.documentElement.style.setProperty('--ring', `rgba(${hexToRgb(a1).join(',')}, .35)`);
      const last = loadThemeState() || { preset:'custom' };
      saveThemeState({ ...last, preset:last.preset || 'custom', customAccent:a1, customAccent2:a2 });
    }
    accentPicker.addEventListener('input', applyCustomColors);
    accent2Picker.addEventListener('input', applyCustomColors);

    // ========== PIN SYSTEM ==========
    let currentPin = '';
    let pinDisabled = false;
    let pinUses = 0;
    const ADMIN_PIN = '091202';
    
    if (localStorage.getItem('pinUses')) {
      pinUses = parseInt(localStorage.getItem('pinUses'));
    }

    function generateBiWeeklyPin() {
      const now = new Date();
      const twoWeekPeriod = Math.floor(now.getTime() / (14 * 24 * 60 * 60 * 1000));
      const pinSeed = (twoWeekPeriod * 12345).toString();
      return pinSeed.slice(-6).padStart(6, '0');
    }

    function getDaysUntilExpiry() {
      const now = new Date();
      const startOfPeriod = new Date(now.getFullYear(), now.getMonth(), now.getDate() - (now.getDay() % 14));
      const nextPeriod = new Date(startOfPeriod);
      nextPeriod.setDate(startOfPeriod.getDate() + 14);
      const diffTime = nextPeriod - now;
      return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    }

    function addPinDigit(digit) {
      if (currentPin.length < 6) {
        currentPin += digit;
        document.getElementById('pinDisplay').textContent = currentPin.padEnd(6, '‚Ä¢');
      }
    }

    function clearPin() {
      currentPin = '';
      document.getElementById('pinDisplay').textContent = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
      document.getElementById('pinMessage').textContent = '';
    }

    function submitPin() {
      const biWeeklyPin = generateBiWeeklyPin();
      const messageEl = document.getElementById('pinMessage');
      
      if (pinDisabled) {
        messageEl.style.color = '#FF6B6B';
        messageEl.textContent = '‚ùå PIN system is currently disabled by admin';
        currentPin = '';
        document.getElementById('pinDisplay').textContent = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
        return;
      }
      
      if (currentPin === ADMIN_PIN) {
        document.getElementById('adminUI').style.display = 'block';
        updateAdminDisplay();
        messageEl.textContent = '';
        currentPin = '';
        document.getElementById('pinDisplay').textContent = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
        document.getElementById('modalBack').style.display = 'none';
      } else if (currentPin === biWeeklyPin) {
        document.getElementById('blooketUI').style.display = 'block';
        pinUses++;
        localStorage.setItem('pinUses', pinUses);
        messageEl.textContent = '';
        currentPin = '';
        document.getElementById('pinDisplay').textContent = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
        document.getElementById('modalBack').style.display = 'none';
      } else {
        messageEl.style.color = '#FF6B6B';
        messageEl.textContent = '‚ùå Invalid PIN';
        currentPin = '';
        document.getElementById('pinDisplay').textContent = '‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢';
        setTimeout(() => {
          messageEl.textContent = '';
        }, 2000);
      }
    }

    function updateAdminDisplay() {
      const biWeeklyPin = generateBiWeeklyPin();
      const daysLeft = getDaysUntilExpiry();
      
      document.getElementById('adminPinDisplay').textContent = biWeeklyPin;
      document.getElementById('adminExpiry').textContent = daysLeft;
      document.getElementById('adminDaysRemaining').textContent = daysLeft;
      document.getElementById('pinUses').textContent = pinUses;
      
      const disableBtn = document.getElementById('disablePinBtn');
      if (pinDisabled) {
        disableBtn.textContent = '‚úÖ Enable PIN for Blooket Hacks';
        disableBtn.style.background = 'linear-gradient(135deg, #22C55E, #7C3AED)';
      } else {
        disableBtn.textContent = '‚õî Disable PIN for Blooket Hacks';
        disableBtn.style.background = 'linear-gradient(135deg, #FF6B6B, #FF4444)';
      }
    }

    function togglePinDisable() {
      pinDisabled = !pinDisabled;
      updateAdminDisplay();
      
      const adminMsg = document.getElementById('adminMessage');
      adminMsg.style.color = pinDisabled ? '#FF6B6B' : '#22C55E';
      adminMsg.textContent = pinDisabled ? 
        '‚ùå PIN disabled until next period' : 
        '‚úÖ PIN enabled - users can access';
      
      setTimeout(() => {
        adminMsg.textContent = '';
      }, 3000);
    }

    function refreshAdminStats() {
      updateAdminDisplay();
      document.getElementById('adminMessage').style.color = '#22C55E';
      document.getElementById('adminMessage').textContent = '‚úÖ Stats refreshed';
      setTimeout(() => {
        document.getElementById('adminMessage').textContent = '';
      }, 2000);
    }

    function closeBlooketUI() {
      document.getElementById('blooketUI').style.display = 'none';
    }

    function closeAdminUI() {
      document.getElementById('adminUI').style.display = 'none';
    }

    function toggleHack(btn) {
      btn.classList.toggle('active');
      btn.textContent = btn.classList.contains('active') ? 'Deactivate' : 'Activate';
    }

    // ========== PROXY MODE ==========
    let searchMode = 'normal';
    const normalBtn = document.getElementById('normalMode');
    const proxyBtn = document.getElementById('proxyMode');
    const searchInput = document.getElementById('searchInput');
    const goBtn = document.getElementById('goBtn');
    
    normalBtn.addEventListener('click', () => {
      searchMode = 'normal';
      normalBtn.classList.add('active');
      proxyBtn.classList.remove('active');
      searchInput.placeholder = 'Search Google or type a URL...';
    });
    
    proxyBtn.addEventListener('click', () => {
      searchMode = 'proxy';
      proxyBtn.classList.add('active');
      normalBtn.classList.remove('active');
      searchInput.placeholder = 'Enter site to proxy (e.g., google.com)';
    });
    
    function runSearch() {
      const q = searchInput.value.trim();
      if (!q) return;
      
      if (searchMode === 'normal') {
        const looksLikeUrl = q.includes('.') && !q.includes(' ') && !q.startsWith('?');
        const url = looksLikeUrl
          ? (q.startsWith('http') ? q : 'https://' + q)
          : 'https://www.google.com/search?q=' + encodeURIComponent(q);
        window.open(url, '_blank', 'noopener');
      } else {
        let proxyUrl = q;
        if (!proxyUrl.startsWith('http://') && !proxyUrl.startsWith('https://')) {
          proxyUrl = 'https://' + proxyUrl;
        }
        window.open('https://homework-helper.fly.dev/?url=' + encodeURIComponent(proxyUrl), '_blank', 'noopener');
      }
    }
    
    goBtn.addEventListener('click', runSearch);
    searchInput.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') runSearch();
    });

    // ========== TIME ==========
    function updateTime(){
      const d = new Date();
      let h = d.getHours();
      const m = String(d.getMinutes()).padStart(2,'0');
      const ampm = h >= 12 ? 'PM' : 'AM';
      h = h % 12; if (h === 0) h = 12;
      document.getElementById('timeText').textContent = `${h}:${m} ${ampm}`;
    }
    updateTime();
    setInterval(updateTime, 1000);

    // ========== VISITOR COUNTER ==========
    function localCount(){
      const k = 'voltify_local_visits';
      const v = Number(localStorage.getItem(k) || '0') + 1;
      localStorage.setItem(k, String(v));
      return v;
    }
    
    async function updateVisitorCount(){
      const el = document.getElementById('visitorCount');
      try{
        const url = `https://api.countapi.xyz/hit/voltify-${Math.random()}/home`;
        const r = await fetch(url, { cache:'no-store' });
        if (!r.ok) throw new Error();
        const data = await r.json();
        el.textContent = data.value.toLocaleString();
      } catch {
        el.textContent = localCount().toLocaleString();
      }
    }
    updateVisitorCount();

    // Settings modal
    const modalBack = document.getElementById('modalBack');
    document.getElementById('openSettings').addEventListener('click', (e) => {
      e.preventDefault();
      modalBack.style.display = 'grid';
    });
    
    document.getElementById('closeSettings').addEventListener('click', () => {
      modalBack.style.display = 'none';
      clearPin();
    });
    
    modalBack.addEventListener('click', (e) => {
      if (e.target === modalBack) {
        modalBack.style.display = 'none';
        clearPin();
      }
    });
  </script>
</body>
</html>